<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:PhotoMapperAI.UI.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="600"
        x:Class="PhotoMapperAI.UI.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="PhotoMapperAI - Photo Mapping Tool"
        Width="1000" Height="700"
        MinWidth="800" MinHeight="500"
        WindowStartupLocation="CenterScreen">

  <Design.DataContext>
    <vm:MainWindowViewModel/>
  </Design.DataContext>

  <Grid RowDefinitions="Auto,*,Auto">
    <!-- Header -->
    <Border Grid.Row="0" Background="#1976D2" Padding="16,12">
      <Grid ColumnDefinitions="Auto,*,Auto">
        <TextBlock Grid.Column="0" Text="ðŸ“· PhotoMapperAI" 
                   FontSize="20" FontWeight="Bold" 
                   VerticalAlignment="Center" Foreground="White"/>
        <TextBlock Grid.Column="1" Text="{Binding StatusMessage}"
                   FontSize="12" VerticalAlignment="Center" 
                   Foreground="#B3E5FC" Margin="20,0,0,0"/>
        <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
          <Button Content="ðŸ’¾ Save Session" Command="{Binding SaveSessionCommand}"
                  Background="#2196F3" Foreground="White" Padding="12,6"/>
          <Button Content="ðŸ“‚ Load Session" Command="{Binding LoadSessionCommand}"
                  Background="#2196F3" Foreground="White" Padding="12,6"/>
        </StackPanel>
      </Grid>
    </Border>

    <!-- Step Progress Indicator -->
    <Border Grid.Row="0" Margin="0,50,0,0" Background="#F5F5F5" Padding="16,8">
      <Grid ColumnDefinitions="*,*,*">
        <!-- Step 1 -->
        <Border Grid.Column="0" Background="{Binding Step1Background}" 
                CornerRadius="4" Padding="12,8" Margin="0,0,8,0">
          <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
            <TextBlock Text="1" FontSize="16" FontWeight="Bold" 
                       Foreground="{Binding Step1Foreground}" Margin="0,0,8,0"/>
            <TextBlock Text="Extract Data" FontSize="14" 
                       Foreground="{Binding Step1Foreground}"/>
          </StackPanel>
        </Border>
        <!-- Step 2 -->
        <Border Grid.Column="1" Background="{Binding Step2Background}" 
                CornerRadius="4" Padding="12,8" Margin="4,0">
          <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
            <TextBlock Text="2" FontSize="16" FontWeight="Bold" 
                       Foreground="{Binding Step2Foreground}" Margin="0,0,8,0"/>
            <TextBlock Text="Map Photos" FontSize="14" 
                       Foreground="{Binding Step2Foreground}"/>
          </StackPanel>
        </Border>
        <!-- Step 3 -->
        <Border Grid.Column="2" Background="{Binding Step3Background}" 
                CornerRadius="4" Padding="12,8" Margin="8,0,0,0">
          <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
            <TextBlock Text="3" FontSize="16" FontWeight="Bold" 
                       Foreground="{Binding Step3Foreground}" Margin="0,0,8,0"/>
            <TextBlock Text="Generate Portraits" FontSize="14" 
                       Foreground="{Binding Step3Foreground}"/>
          </StackPanel>
        </Border>
      </Grid>
    </Border>

    <!-- Main Content Area -->
    <Border Grid.Row="1" Background="White" Margin="16">
      <ContentControl Content="{Binding CurrentView}"/>
    </Border>

    <!-- Footer -->
    <Border Grid.Row="2" Background="#F5F5F5" Padding="16,8">
      <Grid ColumnDefinitions="Auto,*,Auto">
        <TextBlock Grid.Column="0" Text="{Binding CurrentStepDescription}"
                   VerticalAlignment="Center" Foreground="#666"/>
        <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
          <Button Content="â—€ Back" Command="{Binding BackCommand}"
                  IsVisible="{Binding CanGoBack}" Padding="16,8"/>
          <Button Content="Next â–¶" Command="{Binding NextCommand}"
                  IsVisible="{Binding CanGoNext}" 
                  Background="#4CAF50" Foreground="White" Padding="16,8"/>
          <Button Content="âœ“ Finish" Command="{Binding FinishCommand}"
                  IsVisible="{Binding CanFinish}"
                  Background="#2196F3" Foreground="White" Padding="16,8"/>
        </StackPanel>
      </Grid>
    </Border>
  </Grid>
</Window>
