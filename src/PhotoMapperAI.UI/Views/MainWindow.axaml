<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:PhotoMapperAI.UI.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="600"
        x:Class="PhotoMapperAI.UI.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="PhotoMapperAI - Photo Mapping Tool"
        Width="1100" Height="700"
        MinWidth="900" MinHeight="500"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource BackgroundBrush}">

  <Design.DataContext>
    <vm:MainWindowViewModel/>
  </Design.DataContext>

  <Grid RowDefinitions="Auto,Auto,*">
    <!-- Header -->
    <Border Grid.Row="0" Background="{DynamicResource HeaderBackgroundBrush}" Padding="12,8">
      <Grid ColumnDefinitions="Auto,*,Auto">
        <TextBlock Grid.Column="0" Text="ðŸ“· PhotoMapperAI"
                   FontSize="18" FontWeight="Bold"
                   VerticalAlignment="Center" Foreground="{DynamicResource HeaderTextBrush}"/>
        <TextBlock Grid.Column="1" Text="{Binding StatusMessage}"
                   FontSize="11" VerticalAlignment="Center"
                   Foreground="{DynamicResource HeaderSubTextBrush}" Margin="16,0,0,0"/>
        <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="6">
          <Button Content="{Binding ModeToggleText}" Command="{Binding ToggleModeCommand}"
                  Background="{DynamicResource SecondaryBrush}" Foreground="{DynamicResource HeaderTextBrush}" Padding="10,5"/>
          <Button Content="{Binding ThemeToggleText}" Command="{Binding ToggleThemeCommand}"
                  Background="{DynamicResource PrimaryLightBrush}" Foreground="{DynamicResource HeaderTextBrush}" Padding="10,5"/>
        </StackPanel>
      </Grid>
    </Border>

    <!-- Step Navigation Buttons (hidden in batch mode) -->
    <Border Grid.Row="1" Background="{DynamicResource StepProgressBackgroundBrush}" Padding="12,6"
            IsVisible="{Binding !IsBatchMode}">
      <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="8">
        <!-- Step 1 -->
        <Button Click="Step1Button_Click"
                Background="{Binding Step1Background}" 
                Foreground="{Binding Step1Foreground}"
                CornerRadius="4" Padding="16,8" FontWeight="SemiBold">
          <StackPanel Orientation="Horizontal" Spacing="6">
            <TextBlock Text="1" FontSize="14" FontWeight="Bold"/>
            <TextBlock Text="Extract Data" FontSize="12" VerticalAlignment="Center"/>
          </StackPanel>
        </Button>
        <!-- Step 2 -->
        <Button Click="Step2Button_Click"
                Background="{Binding Step2Background}" 
                Foreground="{Binding Step2Foreground}"
                CornerRadius="4" Padding="16,8" FontWeight="SemiBold">
          <StackPanel Orientation="Horizontal" Spacing="6">
            <TextBlock Text="2" FontSize="14" FontWeight="Bold"/>
            <TextBlock Text="Map Players to Photos" FontSize="12" VerticalAlignment="Center"/>
          </StackPanel>
        </Button>
        <!-- Step 3 -->
        <Button Click="Step3Button_Click"
                Background="{Binding Step3Background}" 
                Foreground="{Binding Step3Foreground}"
                CornerRadius="4" Padding="16,8" FontWeight="SemiBold">
          <StackPanel Orientation="Horizontal" Spacing="6">
            <TextBlock Text="3" FontSize="14" FontWeight="Bold"/>
            <TextBlock Text="Generate Portraits" FontSize="12" VerticalAlignment="Center"/>
          </StackPanel>
        </Button>
      </StackPanel>
    </Border>

    <!-- Main Content Area -->
    <Border Grid.Row="2" Background="{DynamicResource BackgroundBrush}" Margin="12">
      <ContentControl Content="{Binding CurrentView}"/>
    </Border>
  </Grid>
</Window>
